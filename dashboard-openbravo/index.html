<html>
    <head>
        <title> Project Budget Payment Dashboard </title>

        <script type="text/javascript" src="../js/js/jquery.js"></script>
        <script type="text/javascript" src="../js/js/highcharts.js"></script>
        <script type="text/javascript" src="../js/js/highcharts-more.js"></script>
        <script type="text/javascript" src="../js/js/modules/exporting.js"></script>
        <script type="text/javascript" src="../js/treegrid/treegrid.js"></script>
        <script type="text/javascript" src="../js/jquery-easyui-1.3.5/jquery.easyui.min.js"></script>
        <script type="text/javascript" src="../js/js/jquery.formatCurrency-1.4.0.min.js"></script>
        <script type="text/javascript" src="../js/js/jquery.formatCurrency-1.4.0.pack.js"></script>
        <script type="text/javascript" src="../js/js/jquery.formatCurrency.all.js"></script>
        <script type='text/javascript' src='https://www.google.com/jsapi'></script>
        <script type="text/javascript" src="../js/codebase/dhtmlxgantt.js"  charset="utf-8"></script>
        <script type="text/javascript" src="../js/codebase/ext/dhtmlxgantt_quick_info.js"  charset="utf-8"></script>

        <link rel="stylesheet" type="text/css" href="../js/treegrid/treegrid.css">
        <link rel="stylesheet" type="text/css" href="../js/jquery-easyui-1.3.5/themes/default/easyui.css">
        <link rel="stylesheet" href="../js/codebase/dhtmlxgantt.css" type="text/css" media="screen" title="no title" >
        <link rel="stylesheet" type="text/css" href="../css/custom.css">

    </head>

    <!--body cellspacing='5'-->
    <body>
        <div id="navbar">
            <div class="dropdown">
                <label for="globalproject">Project :</label>
                <select id='globalproject'></select>
                <input class="std_btn" type='button' value='Apply' id='btnGlobalProject' />
            </div>
            <span class="dropdown">
                <label for="globalyear">Year : </label>
                <select id='globalyear'></select>
                <label for="currency">Currency:</label>
                <select id="currency" 
                        onchange='$("#tbl-perbandingan").datagrid("reload", {currency: this.value})'>
                    <option value="idr">IDR</option>
                    <option value="usd">USD</option>
                </select>
                <input class="std_btn" type='button' value='Apply' id='btnGlobalYear' /></span>
        </div><br/><br/><br/>

        <div id="top">
            <!-- TOP LEFT -->
            <span class="dropdown">
                <label for="optBudgetTopLeft">Pilih Budget :</label>
                <select id='optBudgetTopLeft'></select>
                <input class="std_btn" type='button' value='Apply' id='btnTopLeftBudget' />
            </span>

            <div id="top-left" style='width:100%; float:left; margin-bottom: 30px;'></div>
            <!-- TOP LEFT -->

            <!-- TOP RIGHT -->
            <span class="dropdown">
                <label for="optBudgetTopRight">Pilih Budget :</label>
                <select id='optBudgetTopRight'></select>
                <input class="std_btn" type='button' value='Apply' id='btnTopRight' /></span>
            <div id="top-right" style='width:100%; float:right'></div>
            <!-- TOP RIGHT -->
        </div>

        <div id="bottom" style='height:48%;'>
            <div id="bottom-left-header" style='width:100%; float:right'>
                <center style= 'font-family: "Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif; color: #274b6d;'>
                    <h2 style="margin-top: 40px;">Gantt Chart Project</h2>
                    <span>Berisikan Gantt Chart Project</span>

                </center>
                <br />
                <div id="bottom-left1" style='width:100%;'></div>
                <div id="gantt_here" style='width:100%; height:200%;'></div>
            </div>
            <br />

            <div id="bottom-right-header" style='width:100%; float:left'>
                <center style= 'font-family: "Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif; color: #274b6d;'>
                    <h2 style="margin-top: 40px;">Tabel Budget vs Pengeluaran</h2>
                    <span >menampilkan perbandingan budget dengan pengeluaran</span>

                </center>
                <span style="font-family:'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif;font-size:12px;color:#4d759e;">Select Budget:</span> <select id='budgetMiddleLeft'>
                    <option>Budget v5</option>
                    <option>Budget v4</option>
                </select>
                <input class="std_btn" type='button' value='Apply' id='btnMiddleLeft' />
                <br />
                <br />
                <table id="tbl-budgetCost" class="easyui-treegrid" 
                       style='height: 300px;'
                       data-options="
                       url      :'http://localhost/ob/BudgetCost.php',
                       idField  :'id',
                       treeField:'NAME'"
                       >
                    <thead>
                        <tr>
                            <th data-options="
                                field   :'NAME',
                                width   :470">
                                BUDGET > PROJECT > PHASE > TASK
                            </th>
                            <th data-options="
                                field   :   'TOTAL',
                                width   :   100,
                                align   :   'right',
                                formatter: formatCurrency">
                                Total
                            </th>
                            <th data-options="
                                field:'BALANCE',
                                width:80,
                                formatter: formatCurrency">
                                Balance
                            </th>
                            <th data-options="
                                field: 'Tahun_2010', 
                                width: 100,
                                formatter: formatCurrency">
                                2010
                            </th>
                            <th data-options="
                                field: 'Tahun_2011', 
                                width: 100,
                                formatter: formatCurrency">
                                2011
                            </th>
                            <th data-options="
                                field: 'Tahun_2012', 
                                width: 100,
                                formatter: formatCurrency">
                                2012
                            </th>
                            <th data-options="
                                field: 'Tahun_2013', 
                                width: 100,
                                formatter: formatCurrency">
                                2013
                            </th>
                            <th data-options="
                                field: 'Tahun_2014', 
                                width: 100,
                                formatter: formatCurrency">
                                2014
                            </th>
                            <th data-options="
                                field: 'Tahun_2015', 
                                width: 100,
                                formatter: formatCurrency">
                                2015
                            </th>
                        </tr>
                    </thead>
                </table>
            </div>  

            <div id="bottom-right-header2" style='width:100%; float:left'>
                <center style= 'font-family: "Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif; color: #274b6d;'>
                    <h2 style="margin-top: 40px;">Perbandingan Antar Budget</h2>
                    <span>menampilkan perbandingan antar budget</span>

                </center>

                <span class="dropdown">
                    <label for="budgetBottomRight1">First Budget:</label>
                    <select id='budgetBottomRight1'>
                        <option>Budget v5</option>
                        <option>Budget v4</option>
                    </select>
                </span>

                <span class="dropdown">
                    <label for="budgetBottomRight2">Second Budget:</label>
                    <select id='budgetBottomRight2'>
                        <option>Budget v5</option>
                        <option>Budget v4</option>
                    </select>
                    <input class="std_btn" type='button' value='Apply' id='btnBottomLeft' />
                </span>

                <div style='clear:both'></div>
                <br />
                <br />

                <table id="tbl-budgetComparison" class='easyui-treegrid'
                       style='height: 300px'
                       data-options="
                       url: 'http://localhost/ob/BudgetComparison.php',
                       idField: 'id',
                       treeField: 'name'
                       ">
                    <thead>
                        <tr>
                            <th data-options="
                                field: 'name',
                                width: 800
                                ">
                                BUDGET > PROJECT > GROUP > PHASE >TASK 
                            </th>
                            <th data-options="
                                field: 'budget_1',
                                width: 200,
                                formatter: formatCurrency
                                ">
                                BUDGET 1
                            </th>
                            <th data-options="
                                field: 'budget_2',
                                width: 200,
                                formatter: formatCurrency
                                ">
                                BUDGET 2
                            </th>
                        </tr>
                    </thead>
                </table>

            </div>

            <div id="bottom-most-header" style='width:100%; float:left'>
                <center style= 'font-family: "Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif; color: #274b6d;'>
                    <h2 style="margin-top: 40px;">Budget Dengan Construction Area & Rent Area</h2>
                    <span>Menunjukkan Perbandingan Budget dengan Area</span>
                </center>
                <br />
                <table class="easyui-datagrid" id="tbl-perbandingan" 
                       style="width:760px; margin: 0 auto;"
                       data-options="
                       url:'http://localhost/ob/BudgetGrossNett.php', 
                       fitColumns:true, 
                       singleSelect:true">
                    <thead>
                        <tr>
                            <th data-options="
                                field:'name',
                                width: 
                                '100'">
                                Budget Name
                            </th>
                            <th data-options="
                                field:'budget', 
                                width: '100', 
                                align:'right',
                                formatter: formatCurrency">
                                Budget
                            </th>
                            <th data-options="
                                field:'gross_floor_area', 
                                width: '100', 
                                align:'right'">
                                Gross Floor Area
                            </th>
                            <th data-options="
                                field:'budget_per_gross', 
                                width: '100', 
                                align:'right',
                                formatter: formatCurrency">
                                Budget Per Gross
                            </th>
                            <th data-options="
                                field:'rent_floor_area', 
                                width: '100', 
                                align:'right'">
                                Rent Floor Area
                            </th>
                            <th data-options="
                                field:'budget_per_nett',
                                width: '100',
                                align:'right',
                                formatter: formatCurrency">
                                Budget Per Nett
                            </th>
                        </tr>
                    </thead>
                </table>
                <br />

            </div>

        </div>

        <script src="../js/js/maindashboard.js"></script>
        <script>
                            $(function() {
                                $gridPerbandingan = $("#tbl-perbandingan");
                                $treegridBudgetCost = $("#tbl-budgetCost");
                                $treegridComparison = $("#tbl-budgetComparison");

                                updateGridPerbandingan = function() {
                                    $gridPerbandingan.datagrid('reload', {
                                        currency: $("#currency").val()
                                    });
                                }

                                $("#currency").change(updateGridPerbandingan);

                                updateTreegridComparison = function() {
                                    $treegridComparison.treegrid('reload', {
                                        currency: $("#currency").val(),
                                        project_id: $("#globalproject").val(),
                                        budget1: $("#budgetBottomRight1").val(),
                                        budget2: $("#budgetBottomRight2").val()
                                    });
                                };

                                $("#currency").change(updateTreegridComparison);
                                $("#globalproject").change(updateTreegridComparison);
                                $("#budgetBottomRight1").change(updateTreegridComparison);
                                $("#budgetBottomRight2").change(updateTreegridComparison);

                                updateBudgetCost = function() {
                                    $treegridBudgetCost.treegrid('reload', {
                                        currency: $("#currency").val(),
                                        project_id: $("#globalproject").val(),
                                        budget_id: $("#budgetMiddleLeft").val()
                                    });
                                };

                                $("#currency").change(updateBudgetCost);
                                $("#budgetMiddleLeft").change(updateBudgetCost);
                                $("#globalproject").change(updateBudgetCost);
                            });
        </script>
    </body>
</html>