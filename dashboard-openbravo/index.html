<html>
    <head>
        <title> Project Budget Payment Dashboard </title>

        <script type="text/javascript" src="../js/js/jquery.js"></script>
        <script type="text/javascript" src="../js/js/highcharts.js"></script>
        <script type="text/javascript" src="../js/js/highcharts-more.js"></script>
        <script type="text/javascript" src="../js/js/modules/exporting.js"></script>
        <script type="text/javascript" src="../js/treegrid/treegrid.js"></script>
        <script type="text/javascript" src="../js/jquery-easyui-1.3.5/jquery.easyui.min.js"></script>
        <script type="text/javascript" src="../js/js/jquery.formatCurrency-1.4.0.min.js"></script>
        <script type="text/javascript" src="../js/js/jquery.formatCurrency-1.4.0.pack.js"></script>
        <script type="text/javascript" src="../js/js/jquery.formatCurrency.all.js"></script>
        <script type='text/javascript' src='https://www.google.com/jsapi'></script>
        <script type="text/javascript" src="../js/codebase/dhtmlxgantt.js"  charset="utf-8"></script>
        <script type="text/javascript" src="../js/codebase/ext/dhtmlxgantt_quick_info.js"  charset="utf-8"></script>

        <link rel="stylesheet" type="text/css" href="../js/treegrid/treegrid.css">
        <link rel="stylesheet" type="text/css" href="../js/jquery-easyui-1.3.5/themes/default/easyui.css">
        <link rel="stylesheet" href="../js/codebase/dhtmlxgantt.css" type="text/css" media="screen" title="no title" >
        <link rel="stylesheet" type="text/css" href="../css/custom.css">

    </head>

    <!--body cellspacing='5'-->
    <body>
        <div id="navbar">
            <div class="dropdown">
                <label for="globalproject">Project :</label>
                <select id='globalproject'></select>
                <input class="std_btn" type='button' value='Apply' id='btnGlobalProject' />
            </div>
            <span class="dropdown">
                <label for="globalyear">Year : </label>
                <select id='globalyear'></select>
                <label for="currency">Currency:</label>
                <select id="currency">
                    <option value="idr">IDR</option>
                    <option value="usd">USD</option>
                </select>
                <input class="std_btn" type='button' value='Apply' id='btnGlobalYear' /></span>
        </div><br/><br/><br/>

        <div id="top">
            <!-- TOP LEFT -->
            <span class="dropdown">
                <label for="optBudgetTopLeft">Pilih Budget :</label>
                <select id='optBudgetTopLeft'></select>
                <input class="std_btn" type='button' value='Apply' id='btnTopLeftBudget' />
            </span>

            <div id="top-left" style='width:100%; float:left; margin-bottom: 30px;'></div>
            <!-- TOP LEFT -->

            <!-- TOP RIGHT -->
            <span class="dropdown">
                <label for="optBudgetTopRight">Pilih Budget :</label>
                <select id='optBudgetTopRight'></select>
                <input class="std_btn" type='button' value='Apply' id='btnTopRight' /></span>
            <div id="top-right" style='width:100%; float:right'></div>
            <!-- TOP RIGHT -->
        </div>

        <div id="bottom" style='height:48%;'>
            <div id="bottom-left-header" style='width:100%; float:right'>
                <center style= 'font-family: "Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif; color: #274b6d;'>
                    <h2 style="margin-top: 40px;">Gantt Chart Project</h2>
                    <span>Berisikan Gantt Chart Project</span>

                </center>
                <br />
                <div id="bottom-left1" style='width:100%;'></div>
                <div id="gantt_here" style='width:100%; height:200%;'></div>
            </div>
            <br />

            <div id="bottom-right-header" style='width:100%; float:left'>
                <center style= 'font-family: "Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif; color: #274b6d;'>
                    <h2 style="margin-top: 40px;">Tabel Budget vs Pengeluaran</h2>
                    <span >menampilkan perbandingan budget dengan pengeluaran</span>

                </center>
                <span style="font-family:'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif;font-size:12px;color:#4d759e;">Select Budget:</span> <select id='budgetMiddleLeft'>
                    <option>Budget v5</option>
                    <option>Budget v4</option>
                </select>
                <input class="std_btn" type='button' value='Apply' id='btnMiddleLeft' />
                <br />
                <br />
                <table id="tbl-budgetCost" style="height: 350px"></table>
            </div>  

            <div id="bottom-right-header2" style='width:100%; float:left'>
                <center style= 'font-family: "Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif; color: #274b6d;'>
                    <h2 style="margin-top: 40px;">Perbandingan Antar Budget</h2>
                    <span>menampilkan perbandingan antar budget</span>

                </center>

                <span class="dropdown">
                    <label for="budgetBottomRight1">First Budget:</label>
                    <select id='budgetBottomRight1'>
                        <option>Budget v5</option>
                        <option>Budget v4</option>
                    </select>
                </span>

                <span class="dropdown">
                    <label for="budgetBottomRight2">Second Budget:</label>
                    <select id='budgetBottomRight2'>
                        <option>Budget v5</option>
                        <option>Budget v4</option>
                    </select>
                    <input class="std_btn" type='button' value='Apply' id='btnBottomLeft' />
                </span>
                <div style='clear:both'></div>
                <br />
                <br />
                <table id="tbl-budgetComparison"  style="height:400px"></table>
            </div>

            <div id="bottom-most-header" style='width:100%; float:left'>
                <center style= 'font-family: "Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif; color: #274b6d;'>
                    <h2 style="margin-top: 40px;">Budget Dengan Construction Area & Rent Area</h2>
                    <span>Menunjukkan Perbandingan Budget dengan Area</span>
                </center>
                <br />
                <br />
                <table id="tbl-budgetGrossNet" style="height: 200px;"></table>
            </div>
        </div>

        <script src="../js/js/maindashboard.js"></script>
        <script>
            $(function() {
                initTblBudgetComparison();
                initTblBudgetCost();
                initTblBudgetGrossNet();
            });

            function initTblBudgetComparison() {
                $("#tbl-budgetComparison").treegrid({
                    url: "http://localhost/ob/BudgetComparison.php",
                    idField: "id",
                    treeField: "name",
                    columns: [[
                            {
                                title: "BUDGET > PROJECT > GROUP > PHASE >TASK ",
                                field: "name",
                                width: 800
                            },
                            {
                                title: "Budget 1",
                                field: "budget_1",
                                width: 200,
                                formatter: formatCurrency
                            },
                            {
                                title: "Budget 2 ",
                                field: "budget_2",
                                width: 200,
                                formatter: formatCurrency
                            }
                        ]]
                });

                // handle events
                $("#currency, #budgetBottomRight1, #budgetBottomRight2, #globalproject")
                        .change(function() {
                            $("#tbl-budgetComparison").treegrid('reload', {
                                budget1: $("#budgetBottomRight1").val(),
                                budget2: $("#budgetBottomRight2").val(),
                                project_id: $("#globalproject").val(),
                                currency: $("#currency").val()
                            });
                        })

            }

            function initTblBudgetCost() {
                $("#tbl-budgetCost").treegrid({
                    url: "http://localhost/ob/BudgetCost.php",
                    idField: "id",
                    treeField: "NAME",
                    columns: [[
                            {
                                field: "NAME",
                                title: "BUDGET > PROJECT > PHASE > TASK",
                                width: 470
                            },
                            {
                                field: "TOTAL",
                                title: "Total",
                                width: 100,
                                align: "right",
                                formatter: formatCurrency
                            },
                            {
                                field: "BALANCE",
                                title: "Balance",
                                width: 100,
                                align: "right",
                                formatter: formatCurrency
                            },
                            {
                                field: "Tahun_2010",
                                title: "2010",
                                width: 100,
                                align: "right",
                                formatter: formatCurrency
                            },
                            {
                                field: "Tahun_2011",
                                title: "2011",
                                width: 100,
                                align: "right",
                                formatter: formatCurrency
                            },
                            {
                                field: "Tahun_2012",
                                title: "2012",
                                width: 100,
                                align: "right",
                                formatter: formatCurrency
                            },
                            {
                                field: "Tahun_2013",
                                title: "2013",
                                width: 100,
                                align: "right",
                                formatter: formatCurrency
                            },
                            {
                                field: "Tahun_2014",
                                title: "2014",
                                width: 100,
                                align: "right",
                                formatter: formatCurrency
                            },
                            {
                                field: "Tahun_2015",
                                title: "2015",
                                width: 100,
                                align: "right",
                                formatter: formatCurrency
                            },
                        ]]
                });

                $("#currency, #budgetMiddleLeft, #globalproject").change(function(e) {
                    $("#tbl-budgetCost").treegrid('reload', {
                        currency: $("#currency").val(),
                        project_id: $("#globalproject").val(),
                        budget_id: $("#budgetMiddleLeft").val()
                    });

                });
            }

            function initTblBudgetGrossNet() {
                $("#tbl-budgetGrossNet").datagrid({
                    url: "http://localhost/ob/BudgetGrossNett.php",
                    fitColumns: true,
                    singleSelect: true,
                    columns: [[
                            {
                                field: 'name',
                                title: 'Budget Name',
                                width: 100
                            },
                            {
                                field: 'budget',
                                title: 'Budget',
                                width: 100,
                                align: 'right',
                                formatter: formatCurrency
                            },
                            {
                                field: 'gross_floor_area',
                                title: 'Gross Floor Area',
                                width: 100,
                                align: 'right',
                                formatter: formatCurrency
                            },
                            {
                                field: 'budget_per_gross',
                                title: 'Budget Per Gross',
                                width: 100,
                                align: 'right',
                                formatter: formatCurrency
                            },
                            {
                                field: 'rent_floor_area',
                                title: 'Rent Floor Area',
                                width: 100,
                                align: 'right',
                                formatter: formatCurrency
                            },
                            {
                                field: 'budget_per_nett',
                                title: 'Budget Per Nett',
                                width: 100,
                                align: 'right',
                                formatter: formatCurrency
                            }
                        ]]
                });

                $("#currency, #globalproject").change(function(e) {
                    $("#tbl-budgetGrossNet").datagrid('reload', {
                        currency: $("#currency").val(),
                        project_id: $("#globalproject").val()
                    });
                });
            }


        </script>
    </body>
</html>